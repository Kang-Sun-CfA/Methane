% need a linux system to download MSIS data
% written by Kang Sun on 2018/01/28

% load('latlon_scan.mat')
lat_scan = [66.4202423095703;69.4867477416992;72.4566574096680;75.2750549316406;81.5263061523438;80.9874572753906;79.3585586547852;73.7997055053711;67.2134017944336;60.2684020996094;53.1667480468750;45.9829483032227;38.7500495910645;31.4827022552490;24.1890506744385;16.8737487792969;9.53914833068848;2.18755006790161;-5.17689943313599;-12.5520992279053;-19.9319000244141;-27.3099975585938;-34.6781005859375;-42.0236968994141;-49.3297500610352;-56.5655441284180;-63.6779975891113;-70.5397491455078;-76.7891464233398;-81.0619964599609];
lon_scan = [-12.9103488922119;-16.6077003479004;-21.4222984313965;-27.9601039886475;-82.2356491088867;-105.593643188477;-123.247520446777;-144.990249633789;-155.443008422852;-161.559692382813;-165.700881958008;-168.808303833008;-171.318481445313;-173.460205078125;-175.367904663086;-177.126953125000;-178.795028686523;179.584304809570;177.970306396484;176.328155517578;174.616302490234;172.783843994141;170.761611938477;168.445480346680;165.662994384766;162.096557617188;157.120513916016;149.265289306641;134.513458251953;102.642295837402];

for i = 1:30
    lat = num2str(lat_scan(i),'%.2f');
    if lon_scan(i) < 0
        lon_scan(i) = lon_scan(i)+360;
    end
    lon = num2str(lon_scan(i),'%.2f');
    txt_name = ['msis_',num2str(i),'.txt'];
rstr = ['wget --post-data "model=msis&year=2010&month=09&day=24&time_flag=0&hour=1.5&geo_flag=0.&latitude=',lat,'&longitude=',lon,'&height=100.&profile=1&start=20.&stop=100.&step=1.&f10_7=&f10_7_3=&ap=&format=0&vars=05&vars=012&vars=013&linestyle=solid&charsize=&symbol=2&symsize=&yscale=Linear&xscale=Linear&imagex=640&imagey=480" https://omniweb.sci.gsfc.nasa.gov/cgi/vitmo/vitmo_model.cgi -O ',txt_name];
unix(rstr)
end

unix('tar -cvf $transfer/msis.tar msis*.txt; rm msis*.txt')